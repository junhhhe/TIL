# WebSocket

### 1. WebSocket의 정의 및 등장 배경

* **정의:** **HTML5**에서 도입된 통신 프로토콜로, 클라이언트와 서버 간에 TCP 위에서 동작하며 **실시간 양방향 통신**을 가능하게 하는 **응용 계층 프로토콜**
* **필요성:** 기존 **HTTP** 통신이 요청-응답 방식의 **단방향** 통신을 하는 반면, WebSocket은 지속적인 연결을 통해 실시간 웹 환경의 요구사항을 충족시키기 위해 등장

### 2. WebSocket의 작동 원리

#### 2.1. 프로토콜 전환 (Handshake)

WebSocket 연결은 특이하게도 처음에 **HTTP 프로토콜**을 통해 **핸드셰이크**를 수행

* 클라이언트가 서버에 프로토콜을 WebSocket(`ws` 또는 보안 버전 `wss`)으로 **업그레이드**하겠다는 요청(`Upgrade: websocket` 헤더)을 보냄
* 서버가 이 요청을 수락하면, 연결은 HTTP에서 WebSocket 프로토콜로 전환

#### 2.2. 전이중 통신 및 데이터 전송

* **전이중(Full-Duplex) 통신:** 연결이 한 번 설정되면 클라이언트와 서버가 서로 데이터를 자유롭게 주고받을 수 있는 **양방향 통신**이 가능
* **데이터 형식:** 지속적으로 연결을 유지하면서 **메시지 프레임** 단위로 텍스트와 바이너리 데이터를 주고받음 (이때 헤더 오버헤드가 극히 줄어듬)
* **포트 사용:** TCP 기반이며, HTTP와 동일한 **80번** 포트와 HTTPS와 동일한 **443번** 포트를 사용하여 **방화벽 설정 없이** 통신이 가능

### 3. WebSocket의 핵심 특징 및 장점

| 특징 | 설명 |
| :--- | :--- |
| **양방향 (Full-Duplex) 통신** | 연결된 양쪽(클라이언트와 서버)에서 언제든지 메시지를 보낼 수 있어, 데이터를 빠르게 주고받아야 할 때 탁월 |
| **지속적인 연결** | 초기 핸드셰이크 이후 연결을 계속 유지하며 데이터 교환이 가능 |
| **네트워크 효율성** | HTTP의 비효율적인 반복 요청(Polling) 문제를 해결하여 **네트워크 트래픽과 지연 시간(Latency)을 줄임** |
| **표준 포트 사용** | HTTP(80) 및 HTTPS(443) 포트를 사용하므로 방화벽 통과에 유리 |

### 4. 주요 활용 분야

* 실시간 채팅 시스템
* 알림 시스템
* 온라인 멀티플레이어 게임
* 주식 시세 및 데이터 스트리밍 서비스

### 5. 구식 브라우저 지원에 대한 고려 사항

만약 WebSocket을 지원하지 않는 **구식 브라우저**를 지원해야 한다면, WebSocket 연결이 불가능할 경우 Polling이나 Long Polling과 같은 다른 방식으로 자동으로 전환해주는 **Socket.IO**와 같은 라이브러리를 사용하는 것이 대안이 될 수 있음
